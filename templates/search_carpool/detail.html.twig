{% extends 'base.html.twig' %}

{% set photoBase64 = carpoolOwner.photo|to_base64 %}

{% block title %}Écoride - Trajet
	{{carpool.startPlace}}
	>
	{{carpool.endPlace}}
{% endblock %}

{% block body %}
	{# Zone de résumé du trajet #}
	<div class="mt-5 ecoride-container rounded p-2 container d-flex justify-content-center text-center align-self-center align-self-lg-start">
		<div class="w-75">
			{% include 'partials/carpool/element.carpooldetails.html.twig' %}

			{# Bouton de démarrage du covoiturage #}
			<div class="row p-3 justify-content-center">
				<div class="col-auto">
					{% if not isParticipate %}
						<form action="{{path('app_carpool_participate', {id:carpool.id})}}" method="post">
							<button class="btn btn-success" type="submit">
								<i class="bi bi-send-plus"></i>
								Participer au covoiturage
							</button>
						</form>
					{% else %}
						<a class="btn btn-success disabled">
							<i class="bi bi-send-plus"></i>
							Participer au covoiturage
						</a>
					{% endif %}
				</div>
			</div>

			{# Zone information covoiturage -> nombre de place et prix par place #}
			<div class="row row-cols-lg-3 row-cols-1 p-lg-3 p-2 bg-light text-dark my-2 rounded shadow-sm justify-content-center">
				<div class="col d-flex align-items-center justify-content-center">
					<i class="bi bi-person-workspace fs-2 pe-2"></i>
					{{carpool.availableseat}}
					{{carpool.availableseat > 1 ? 'places disponibles' : 'place disponible'}}
				</div>
				<div class="col d-flex align-items-center justify-content-center">
					<i class="bi bi-currency-euro pe-2 fs-2"></i>
					{{carpool.pricePerPerson}}
					<i class="bi bi-coin px-1" data-bs-toggle="tooltip" data-bs-placement="top" title="Écopièce"></i>
					par place
				</div>
				<div class="col d-flex align-items-center justify-content-center">
					<i class="bi bi-piggy-bank-fill pe-2 fs-2"></i>
					{{carpool.pricePerPerson * carpool.availableseat}}
					<i class="bi bi-coin px-1" data-bs-toggle="tooltip" data-bs-placement="top" title="Écopièce"></i>
					au total
				</div>
			</div>
			{# Zone information User #}
			<div class="p-lg-3 p-2 bg-light text-dark my-2 rounded shadow-sm d-inline-flex align-items-center gap-5 flex-nowrap">

				<div class="d-flex flex-column align-items-center text-center">
					{% if photoBase64 is not null %}
						<img src="data:image/png;base64,{{ photoBase64|e }}" class="profile-img" alt="Photo de profil de {{ carpoolOwner.username }}">
					{% else %}
						<img src="{{ asset('import/blank-profile.png') }}" class="profile-img" alt="Photo de profil par défaut">
					{% endif %}
					<span class="fs-5 fw-bold">{{ carpoolOwner.username }}</span>
				</div>

				<div class="d-flex flex-column align-items-center text-center">
					<span class="fs-5 fw-bold">{{ carpoolOwner.firstname }}
						{{ carpoolOwner.lastname }}</span>
					<span class="fs-5 mt-3">Note :</span>
					<span>{{ carpoolOwner.grade ?? '--' }}
						/ 5</span>
				</div>

			</div>

		</div>
	</div>
{% endblock %}
